cmake_minimum_required(VERSION 3.3)
if(NOT CMAKE_BUILD_TYPE)
  set(CMAKE_BUILD_TYPE Release CACHE STRING "Debug or Release")
endif()
project(f2018random Fortran)
enable_testing()

get_directory_property(hasParent PARENT_DIRECTORY)
if(NOT hasParent)
  include(${CMAKE_CURRENT_SOURCE_DIR}/../cmake/compilers.cmake)
endif()

include(${CMAKE_CURRENT_SOURCE_DIR}/../cmake/f18random.cmake)

add_executable(random random.f90 random_demo.f90)
target_compile_options(random PRIVATE ${FFLAGS})
target_link_libraries(random PRIVATE ${FLIBS})
add_test(NAME RandomInit COMMAND random)
if(f18random)
  target_sources(random PRIVATE random_init_f2018.f90)
else()
  target_sources(random PRIVATE random_init.f90)
endif()
